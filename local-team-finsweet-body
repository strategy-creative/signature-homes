<script>
$(document).ready(function() {
  $('.filter_button.is-all').prependTo('.filter_button_wrapper');
});
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const allFilterLabel = document.querySelector(".filter_button.is-all label");
    const allCheckbox = allFilterLabel.querySelector("input[type='checkbox']");
    const otherCheckboxes = document.querySelectorAll(".filter_button:not(.is-all) input[type='checkbox']");

    otherCheckboxes.forEach(checkbox => {
      checkbox.addEventListener("change", () => {
        const anyChecked = [...otherCheckboxes].some(cb => cb.checked);
        if (anyChecked) {
          allFilterLabel.classList.remove("fs-cmsfilter_active");
          allCheckbox.checked = false;
        } else {
          allFilterLabel.classList.add("fs-cmsfilter_active");
          allCheckbox.checked = true;
        }
      });
    });

    allCheckbox.addEventListener("change", () => {
      if (allCheckbox.checked) {
        allFilterLabel.classList.add("fs-cmsfilter_active");
        otherCheckboxes.forEach(cb => {
          cb.checked = false;
        });
      }
    });
  });
</script>
